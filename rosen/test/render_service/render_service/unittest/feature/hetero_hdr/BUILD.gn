 * Copyright (c) 2025 Huawei Device Co., Ltd.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.

import("//build/test.gni")
import("//foundation//graphic/graphic_2d/graphic_config.gni")

module_out_path = "graphic_2d/graphic_2d/rosen_engine/render_service/feature"

group("unittest") {
    testonly = true

    deps = [
        ":RSHeteroHDRHpaeTest",
    ]
}

#############################################################################
config("hetero_hdr_test") {
    include_dirs = [
        "graphic_2d_root/rosen/modules/render_service/core",
        "graphic_2d_root/rosen/modules/render_service_base/include",
        "graphic_2d_ext_root",
    ]

    cflags = [
        "-wall",
        "-werror"
        "-g3",
        "-Dprivate=public"
        "Dprotected=public",
    ]
}

ohos_unittest("RSHeteroHDRHpaeTest") {
    module_out_path = module_out_path
    sources = [
        "graphic_2d_ext_root/hetero_hdr/test/unittest/rs_hetero_hdr_buffer_layer_test.cpp",
        "graphic_2d_ext_root/hetero_hdr/test/unittest/rs_hetero_hdr_buffer_hpae_test.cpp",
        "graphic_2d_ext_root/hetero_hdr/test/unittest/rs_hetero_hdr_manager_test.cpp",
        "graphic_2d_ext_root/hetero_hdr/test/unittest/rs_hetero_hdr_pattern_manager_test.cpp",
    ]
    public_configs = [ ":hetero_hdr_test"]
    deps = [
        "graphic_2d_root/rosen/modules/composer:libcomposer",
        "graphic_2d_root/rosen/modules/render_service:librender_service",
        "graphic_2d_root/rosen/modules/render_service_base:librender_service_base",
        "graphic_2d_root/rosen/modules/render_service_client:librender_service_client",
        "graphic_2d_root/utils:socketpair",
    ]
    external_deps = [
        "c_utils:utils",
        "ffrt:libffrt",
        "googletest:gmock_main",
        "googletest:gtest_main",
        "hilog:libhilog",
        "hitrace:hitrace_meter",
        "init:libbegetutil",
        "ipc:ipc_core",
        "memmgr:memmgrclient",
        "drivers_interface_himediacomm:libhimediacomm_copybit_pt_proxy_1.0",
        "hdf_core:libhdi",
        "mhc_client:libmhc_client",
    ]
if  (defined(use_video_processing_engine) && use_video_processing_engine) {
      defines += [ "USE_VIDEO_PROCESSING_ENGINE‚Äù ]
      external_deps += [
        "drivers_interface_display:libdisplay_commontype_proxy_1.0",
        "video_processing_engine:videoprocessingengine",
      ]
    } 
}